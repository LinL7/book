# Linux 高性能服务器编程

[TOC]



## TCP/IP协议

- TCP/IP协议族是一个四层协议系统，自底向上分别是**数据链路层、网络层、传输层和网络层**。

![<!--image-20220919204959895-->](F:\book\Linux高性能服务器编程.pdf\Linux 高性能服务器编程.assets\image-20220919204959895.png)

- **数据链路层**实现了网卡接口的网络驱动程序，以处理数据在屋里媒介上的传输。常有的协议有ARP协议（地址解析协议）和RARP协议（逆地址解析协议)，实现了IP地址和机器物理地址的相互转换。

   <font size = 3> ARP协议请求/应答报文格式为 </font>

  ![image-20220919210615531](F:\book\Linux高性能服务器编程.pdf\Linux 高性能服务器编程.assets\image-20220919210615531.png)

- **网络层**实现数据包的选路和转发。IP协议、ICMP协议

   <font size = 3>  除非含有可变长的选项部分，IPv4的头部长度通常为20 </font>

  ![image-20220919211447838](F:\book\Linux高性能服务器编程.pdf\Linux 高性能服务器编程.assets\image-20220919211447838.png)

  其中，数据报标识、标志和片偏移为IP的分片和重组提供了足够的信息，一个IP数据报的每个分片都具有自己的IP头部，它们具有相同的标识值，但具有不同的片偏移，并且除了最后一个分片外，其他分片都要设置MF标志。

  IP路由机制：

  ![image-20220919212147946](F:\book\Linux高性能服务器编程.pdf\Linux 高性能服务器编程.assets\image-20220919212147946.png)

  ![image-20220919212209027](F:\book\Linux高性能服务器编程.pdf\Linux 高性能服务器编程.assets\image-20220919212209027.png)

  IPv6的头部固定长度通常为40

  ![image-20220919212414813](F:\book\Linux高性能服务器编程.pdf\Linux 高性能服务器编程.assets\image-20220919212414813.png)

  

- **传输层**为两台主机上的应用程序实现端到端的通信。TCP、UDP、SCTP协议。

  TCP头部结构：

  ![image-20220919212708752](F:\book\Linux高性能服务器编程.pdf\Linux 高性能服务器编程.assets\image-20220919212708752.png)

  

- **应用层**负责处理应用程序的逻辑。

  

  



